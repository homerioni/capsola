(()=>{"use strict";var t={91:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},230:(t,e,n)=>{t.exports=n.p+"assets/2b2dba07226e8918aee9.js"},831:(t,e,n)=>{t.exports=n.p+"assets/3b371c510a98aaa8bb71.webp"},790:(t,e,n)=>{t.exports=n.p+"assets/f54523bf1d5695fb58db.webp"},724:(t,e,n)=>{t.exports=n.p+"assets/0325978965c57dd05a13.png"}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&!t;)t=a[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t=n(91),e=n.n(t),a=new URL(n(230),n.b),s=new URL(n(790),n.b),i=new URL(n(831),n.b),r=new URL(n(724),n.b);e()(a),e()(s);e()(i),e()(r);const o=async(t,e,n)=>{let a="",s={"Content-Type":"application/json","X-API-Key":"062634cd-71ba-43be-aaf1-40ff40aace68"};try{const n=await fetch("https://capsola.onrender.com"+e,{crossDomain:!0,method:t.method||"POST",body:t.data&&JSON.stringify({...t.data,headers:s}),headers:s});if(a=await n.json(),!n.ok)throw a.error.description?new Error(a.error.description):new Error(a.error.message)}catch(t){throw n&&n(),"Failed to fetch"===t.message?new Error("Нет соединения с сервером"):new Error(t.message)}return a},c=n.p+"assets/aa145e6fba96cfb72d93.svg";$(document).ready((function(){function t(t){const e=[],n=/x=([\d.]+),y=([\d.]+)/g;let a;for(;null!==(a=n.exec(t));){const t=parseFloat(a[1]),n=parseFloat(a[2]);e.push([t,n])}return e}const e=function(){const t=new Image;return t.src=c,t.className="isLoading__img",{start:e=>e.addClass("isLoading").append(t),stop:t=>t.removeClass("isLoading").find(".isLoading__img").remove()}}(),n=$(".main__form-submit");let a,s;function i(t){t.parent().removeClass("active").find('input[type="file"]').val(""),t.siblings(".main__file-img").find("img").attr("src",""),t.siblings(".main__file-name").html(""),t.siblings(".main__file-size").html("")}$(document).on("input",'.main__radio-buttons input[type="radio"]',(function(){$(this).parent().addClass("active").siblings("*").removeClass("active")})),$(document).on("input",'.main__upload-label input[type="file"]',(function(){const t=$(this),e=t[0].files[0],n=new FileReader;n.onload=function(e){const n=e.target.result;console.log(e),"captchaImg"===t.attr("name")?(a=n.slice(n.indexOf(",")+1),$("#resultFindImg").attr("src",n),$("#originalImg").attr("src",n)):"iconsImg"===t.attr("name")&&(s=n.slice(n.indexOf(",")+1),$("#iconsImg").attr("src",n)),t.siblings(".main__file-img").find("img").attr("src",e.target.result)},n.readAsDataURL(e),t.parent().addClass("active"),t.siblings(".main__file-name").html(e.name),t.siblings(".main__file-size").html(Math.ceil(e.size/1e3)+"KB")})),$(document).on("click",".main__upload-label.active",(t=>t.preventDefault())),$(document).on("click",".main__file-clear",(function(){$(this).parent().removeClass("active"),i($(this))})),$(document).on("change",".main__form",(function(){let t=!0;$(this).children("*:not(.main__form-buttons)").each((function(){const e=$(this);e.find('input[type="radio"]').length&&(e.find("input:checked").length||(t=!1)),e.find('input[type="file"]').length&&(e.find("input").val().length||(t=!1))})),t?(n.removeAttr("disabled"),$(".main__form-buttons").addClass("active")):(n.attr("disabled","disabled"),$(".main__form-buttons").removeClass("active"))})),$(document).on("click",".main__form-clear",(function(){$(".main__upload-label input").each((function(){i($(this))})),$(".main__form-buttons").removeClass("active"),$(".main__radio-label").removeClass("active").find("input").prop("checked",!1),n.attr("disabled","disabled"),$(".main__form-buttons .error-text").hide()})),$(document).on("submit",".main__form",(function(i){i.preventDefault();const r={type:"SmartCaptcha",url:"https://api.capsola.cloud/create",click:a,task:s};e.start(n),$(".main__form-buttons .error-text").hide(),o({method:"POST",data:r},"/send-request",(()=>e.stop(n))).then((a=>{!async function(a){let s=!1;for(;!s;)await o({method:"POST",data:{id:a,url:"https://api.capsola.cloud/result"}},"/get-result",(()=>e.stop(n))).then((a=>{s=!0,$("#resultList").html("");const i=t(a.result.response);i.map(((t,e)=>$("#resultList").append(`<li>${e+1}: x:${t[0]} y:${t[1]}</li>`)));const r=new Image;r.onload=()=>{const t=$("#resultFindImg").width()/r.width;i.map(((e,n)=>{$("#resultImgBox").append(`<div class="main__result-click" style="top: ${e[1]*t}px; left: ${e[0]*t}px">${n+1}</div>`)}))},r.src=$("#resultFindImg").attr("src"),$("#resultContent").slideToggle(500,(function(){$(".main__content").css("transform","translateX(calc(-100% - 8rem))"),e.stop(n)}))}))}(a.result.response)})).catch((t=>{$(".main__form-buttons .error-text").html(t.message).show(),e.stop(n)}))})),$(document).on("click",".main__new-test-btn",(function(){$(".main__content").removeAttr("style"),$("#resultContent").slideToggle(500)}))}))})()})();