!function(){"use strict";var t={91:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},230:function(t,e,n){t.exports=n.p+"assets/2b2dba07226e8918aee9.js"},831:function(t,e,n){t.exports=n.p+"assets/3b371c510a98aaa8bb71.webp"},336:function(t,e,n){t.exports=n.p+"assets/f54523bf1d5695fb58db.webp"},790:function(t,e,n){t.exports=n.p+"assets/f54523bf1d5695fb58db.webp"},724:function(t,e,n){t.exports=n.p+"assets/0325978965c57dd05a13.png"}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!t;)t=i[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t}(),n.b=document.baseURI||self.location.href,function(){var t=n(91),e=n.n(t),i=new URL(n(230),n.b),a=new URL(n(790),n.b),o=new URL(n(831),n.b),s=new URL(n(336),n.b),r=new URL(n(724),n.b);e()(i),e()(a);e()(o),e()(s),e()(r);var c=n.p+"assets/aa145e6fba96cfb72d93.svg";$(document).ready((function(){const t=function(){const t=new Image;return t.src=c,t.className="isLoading__img",{start:e=>e.addClass("isLoading").append(t),stop:t=>t.removeClass("isLoading").find(".isLoading__img").remove()}}(),e=$(".main__form-submit");let n,i;function a(t){t.parent().removeClass("active").find('input[type="file"]').val(""),t.siblings(".main__file-img").find("img").attr("src",""),t.siblings(".main__file-name").html(""),t.siblings(".main__file-size").html("")}function o(t,e){$("#resultInfoParameter, #modeInfo").show().find("span").html("sobel"===t?"Удаления фона":"Модификация цвета"),"sobel"===t?$("#resultInfoAccuracy").show().find("span").html(e.filter.value):($("#resultInfoTolerance").show().find("span").html(e.filter.tolerance),$("#resultInfoStep").show().find("span").html(e.filter.step),$("#resultInfoContour").show().find("span").html(e.filter.count_contour),$("#resultInfoBlur").show().find("span").html(e.filter.blur?"Да":"Нет"))}$(document).on("input",'.main__radio-buttons input[type="radio"]',(function(){$(this).parent().addClass("active").siblings("*").removeClass("active")})),$(document).on("input",'.main__upload-label input[type="file"]',(function(){const t=$(this),e=t[0].files[0],a=new FileReader;a.onload=function(e){const a=e.target.result;"captchaImg"===t.attr("name")?n=a.slice(a.indexOf(",")+1):"iconsImg"===t.attr("name")&&(i=a.slice(a.indexOf(",")+1)),t.siblings(".main__file-img").find("img").attr("src",e.target.result)},a.readAsDataURL(e),t.parent().addClass("active"),t.siblings(".main__file-name").html(e.name),t.siblings(".main__file-size").html(Math.ceil(e.size/1e3)+"KB")})),$(document).on("click",".main__upload-label.active",(t=>t.preventDefault())),$(document).on("click",".main__file-clear",(function(){$(this).parent().removeClass("active"),a($(this))})),$(document).on("change",".main__form",(function(){let t=!0;$(this).children("*:not(.main__form-buttons)").each((function(){const e=$(this);e.find('input[type="radio"]').length&&(e.find("input:checked").length||(t=!1)),e.find('input[type="file"]').length&&(e.find("input").val().length||(t=!1))})),t?(e.removeAttr("disabled"),$(".main__form-buttons").addClass("active")):(e.attr("disabled","disabled"),$(".main__form-buttons").removeClass("active"))})),$(document).on("click",".main__form-clear",(function(){$(".main__upload-label input").each((function(){a($(this))})),$(".main__form-buttons").removeClass("active"),$(".main__radio-label").removeClass("active").find("input").prop("checked",!1),e.attr("disabled","disabled"),$(".main__form-buttons .error-text").hide()})),$(document).on("submit",".main__form",(function(a){a.preventDefault();let s="";const r={screenshot_captcha:n,screenshot_icons:i};$(".main__result-info li").hide(),"sobel"===$('.main__radio-buttons input[name="mode"]:checked').val()?(s="/get_captcha_solve_sequence_sobel_business",r.filter={value:70},o("sobel",r)):(s="/get_captcha_solve_sequence_old_business",r.filter={step:2,tolerance:6,count_contour:1400,blur:!0},o("discolor",r)),t.start(e),$(".main__form-buttons .error-text").hide(),(async(t,e)=>{let n="",i={"Content-Type":"application/json"};try{const e=await fetch("http://localhost:8000"+t.url,{crossDomain:!0,method:t.method||"POST",body:t.data&&JSON.stringify(t.data),headers:t.headers?Object.assign(i,t.headers):i});if(n=await e.json(),!e.ok)throw n.error.description?new Error(n.error.description):new Error(n.error.message)}catch(t){throw e&&e(),"Failed to fetch"===t.message?new Error("Нет соединения с сервером"):new Error(t.message)}return n})({url:s,method:"POST",data:r},(()=>t.stop(e))).then((n=>{console.log(n),$("#originalImg").attr("src",`data:image/png;base64,${n.captcha}`),$("#resultImg").attr("src",`data:image/png;base64,${n.discolored_captcha}`),$("#resultFindImg").attr("src",`data:image/png;base64,${n.answer}`),$("#iconsImg").attr("src",`data:image/png;base64,${n.icons}`),t.stop(e),$("#resultContent").slideToggle(500,(function(){$(".main__content").css("transform","translateX(calc(-100% - 8rem))")}))})).catch((n=>{$(".main__form-buttons .error-text").html(n.message).show(),t.stop(e)}))})),$(document).on("click",".main__new-test-btn",(function(){$(".main__content").removeAttr("style"),$("#resultContent").slideToggle(500)}))}))}()}();